version: "3.8"

services:
    test:
        image: golang:latest
        container_name: test
        restart: unless-stopped
        entrypoint: go run src/main.go
        volumes:
           - ./main.go:/go/src/main.go
        networks:
            - traefik
        expose:
            - 80
        labels:
            traefik.enable: true
            traefik.http.routers.test.rule: Host(`test.topi.wtf`)
            traefik.http.routers.test.entrypoints: https
            traefik.http.services.test.loadbalancer.server.port: 80

networks:
    traefik:
        external: true
